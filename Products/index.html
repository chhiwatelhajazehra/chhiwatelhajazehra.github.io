<!DOCTYPE html>
<html lang="fr">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">

	<link rel="stylesheet" href="../styles/fonts.css">
  <link rel="stylesheet" href="../styles/colors.css">

	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<link rel="stylesheet" href="../styles/style.css">
	<link rel="stylesheet" href="../styles/main.css">
	<link rel="stylesheet" href="../styles/logo.css">
	<link rel="stylesheet" href="../styles/menu-icon.css">
	<link rel="stylesheet" href="../styles/footer.css">
	<link rel="stylesheet" href="../styles/scroll_bar.css">
	<link rel="stylesheet" href="../styles/content.css">
	<link rel="stylesheet" href="../styles/widgets.css">

    <link rel="shortcut icon" type="image/x-icon" href="../assets/icon.ico?">
    
	<script src="../javascript/main.js"></script>

	<title>شهيوات الحاجة زهرة - Tous Les Produits</title>
</head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Q35492K8WM"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-Q35492K8WM');
</script>
<body class="products-page-pattern">
	<!-- <div class="header"> -->
		<!-- <div class="product-page-container"> -->
			<div class="products-page-navbar">
				<!-- <p class="text-logo" onclick='OpenLink("main", "_self")'>شهيوات الحاجة زهرة</p> -->
				<p class="text-logo" onclick='window.open("../", "_self")'>شهيوات الحاجة زهرة</p>
				<nav>
					<ul id="MenuItems">
						<li><a href="../">Accueil</a></li>
						<li><a href="../Products">Produits</a></li>
						<!-- <li><a href="#">Nouveautés</a></li> -->
						<!-- <li><a href="#">Promotions</a></li> -->
						<!-- <li><a href="#">Meilleures ventes</a></li> -->
						<li><a href="#">À propos</a></li>
					</ul>
				</nav>
				<div class="menu-icon" onclick="menutoggle()">
					<div class="menu-icon-bar" id="top-menu-icon-bar"></div>
					<div class="menu-icon-bar" id="mid-menu-icon-bar"></div>
					<div class="menu-icon-bar" id="bot-menu-icon-bar"></div>
				</div>
			</div>

		<!-- </div> -->
	<!-- </div> -->

	<div class="sm-widget">
	    <a onclick='OpenLink("wa", "_self")' class="sm-link" title="Whatsapp">
	    	<span class="fa fa-whatsapp"></span>
	    </a>
	</div>	
	
	<!-- ----------- products ----------- -->

	<div class="small-container">
		<div class="products-page-row row-2">
			<div class="products-side-thing">
				<h2>Tous Les Produits</h2>
				<p>Il y a 134 produits.</p>
				<p>1-24 sur 60000 résultats.</p>
			</div>
			<select id="products-select">
			<h2>Tous Les Produits</h2>
				<option>Tri par défaut</option>
				<option>Le moins cher</option>
				<option>Le plus cher</option>
				<option>Nom de A à Z</option>
				<option>Nom de Z à A</option>
			</select>
		</div>

		
	</div>

	<!-- ---------------- footer --------------- -->

	<footer class="footer">
		<div class="footer-container" style="max-width: 700px;">
			<div class="footer-row">
				<div class="footer-col">
					<h4>Société</h4>
					<ul>
						<li><a href="#">À propos</a></li>
						<li><a href="#">Nos Services</a></li>
						<li><a href="#">Options de Paiement</a></li>
						<!-- <li><a href="#">Privacy Policy</a></li> -->
						<!-- <li><a href="#">Affiliate Program</a></li> -->
					</ul>
				</div>

				<div class="footer-col">
					<h4>Support</h4>
					<ul>
						<!-- <li><a href="#">FAQ</a></li> -->
						<li><a href="#">Livraison</a></li>
						<li><a href="#">Retours</a></li>
						<li><a href="#">Statut de la Commande</a></li>
					</ul>
				</div>

				<!-- <div class="footer-col">
					<h4>Online Shop</h4>
					<ul>
						<li><a href="#">Watch</a></li>
						<li><a href="#">Bags</a></li>
						<li><a href="#">Shoes</a></li>
						<li><a href="#">Dress</a>
					</ul>
				</div> -->

				<!-- https://glovoapp.com/ in french  -->
				<!-- <div class="footer-col">
					<h4>Liens utiles</h4>
					<ul>
					</ul>
				</div> -->

				<div class="footer-col">
					<!-- <h4>Nous suivre</h4> -->
					<h4>Nous contacter</h4>
					<ul>
						<div class="social-links">

							<a onclick='OpenLink("wa", "_self")' id="wa-icon"><span class="fa fa-whatsapp"></span></a>
							<a onclick='OpenLink("fb", "_blank")' id="fb-icon"><span class="fa fa-facebook-f"></span></a>
							<a onclick='OpenLink("ig", "_blank")' id="ig-icon"><span class="fa fa-instagram"></span></a>

							<!-- <a target="_blank" href="#" id="tw-icon"><span class="fa fa-twitter"></span></a> -->
							<!-- <a target="_blank" href="#" id="li-icon"><span class="fa fa-linkedin"></span></a> -->

							<!-- <a target="_blank" href="#" id="ig-icon">
								<div class="ig-icon-bg">
									<div class="ig-icon-inner">
								    	<span class="fa fa-instagram"></span>
									</div>
								</div>
							</a> -->
						</div>
					</ul>
				</div>
			</div>
		</div>

		<br>

		<div class="container">
			<hr>

			<!-- <br> -->

			<div class="footer-container">
				<div class="footer-row">
					<div class="footer-col" style="margin-bottom: 5px;">
						<!-- <h4>Follow Us</h4> -->
						<div class="social-links">

							<a onclick='OpenLink("wa", "_self")' id="wa-icon"><span class="fa fa-whatsapp"></span></a>
							<a onclick='OpenLink("fb", "_blank")' id="fb-icon"><span class="fa fa-facebook-f"></span></a>
							<a onclick='OpenLink("ig", "_blank")' id="ig-icon"><span class="fa fa-instagram"></span></a>

							<!-- <a target="_blank" href="#" id="tw-icon"><span class="fa fa-twitter"></span></a> -->
							<!-- <a target="_blank" href="#" id="li-icon"><span class="fa fa-linkedin"></span></a> -->

							<!-- <a target="_blank" href="#" id="ig-icon">
								<div class="ig-icon-bg">
									<div class="ig-icon-inner">
								    	<span class="fa fa-instagram"></span>
									</div>
								</div>
							</a> -->

						</div>
					</div>
				</div>
			</div>

			<!-- <br> -->
			<!-- <br> -->
			<!-- <br> -->

			<div style="display: flex;">
				<svg aria-hidden="true" focusable="false" viewBox="0 0 24 24" role="img" width="18px" height="15px" fill="none">
					<path fill="#fff" fill-rule="evenodd" d="M4.5 9.001a7.5 7.5 0 1115 0c0 1.205-.385 2.576-.934 3.928-.555 1.364-1.302 2.767-2.08 4.055a39.918 39.918 0 01-2.307 3.405c-.688.905-1.316 1.632-1.711 1.947a.75.75 0 01-.936 0c-.395-.315-1.023-1.042-1.711-1.947a39.916 39.916 0 01-2.306-3.405c-.78-1.288-1.526-2.691-2.08-4.056-.55-1.351-.935-2.722-.935-3.927zM12 12.25a3.25 3.25 0 100-6.5 3.25 3.25 0 000 6.5z" clip-rule="evenodd"></path>
				</svg>
				<span style="color: #fff; margin: -2px 14px 0 2px;">Maroc</span>
				<p class="copyright" style="margin: -2px 0;">© 2023 شهيوات الحاجة زهرة.</p>
			</div>

		</div>
	</footer>

	<!-- ------------------------ js for toggle menu ---------------------- -->

	<script type="text/javascript">

		let urlParams = new URLSearchParams(window.location.search);
		
		var small_container_Element = document.getElementsByClassName('small-container')[0];
		// var _page_max = 8;
		var _page_max = 16;
		var _page=1;
		var _curr=(_page_max*(_page-1))+1;
		small_container_Element.children[0].children[0].children[1].innerText="Il y a "+products.length+" produits.";
		small_container_Element.children[0].children[0].children[2].innerText=_curr+"-"+_page_max*_page+" sur "+products.length+" résultats.";

		var _new_url="";

		function UpdatePage(no_url_change=0)
		{
			var small_container_Element = document.getElementsByClassName('small-container')[0];
			var _curr=_page_max*(_page-1)+1;
			small_container_Element.children[0].children[0].children[1].innerText="Il y a "+products.length+" produits.";
			small_container_Element.children[0].children[0].children[2].innerText=_curr+"-"+_page_max*_page+" sur "+products.length+" résultats.";
			// make the span hover color stick
			sort(1);
			var _thing = (urlParams.get("sorting")==null)?("?page="+_page):("&page="+_page);
			if(no_url_change==1)
				return;
			if(_new_url==null)
				_new_url+=location.href;
			const url = _new_url+_thing;
   			window.history.pushState('', '', url);
   			if(no_url_change==2)
				window.location = url;
		}

		addProducts();

		function addProducts()
		{
			var small_container_Element = document.getElementsByClassName('small-container')[0];

			var page_btn = CreateElement('div', 'page-btn', small_container_Element);
			page_btn.style="margin: 0 auto 50px;";
				let prev_page_btn = CreateElement('span', '', page_btn);
					prev_page_btn.innerHTML = '&#8592;';
				for(var i=1; i<(products.length/_page_max)+1; i++)
					CreateElement('span', 'page-num', page_btn).innerHTML = i;
				let next_page_btn = CreateElement('span', '', page_btn);
				next_page_btn.innerHTML = '&#8594;';

			prev_page_btn.onclick = function()
			{
				if(_page>1)
				{
					_page--;
					UpdatePage(2);
				}
			}

			next_page_btn.onclick = function()
			{
				console.log(_page);
				console.log(document.getElementsByClassName("page-num").length/2);
				if(_page<document.getElementsByClassName("page-num").length/2)
				{
					_page++;
					UpdatePage(2);
				}
			}

			for(var j=0; j<_page_max/4;j++)
			{
				var row_Element = CreateElement('div', 'products-page-row', small_container_Element);
					for(var i=1; i<5; i++)
					{
						if( (((i+(4*j))-1)+(_page_max*(_page-1)))>products.length-1 )
							break;
							
							var col_4_Element = CreateElement('div', 'products-page-col-4', row_Element);

							const __url = location.protocol + '//' + location.host;
							var _a = CreateElement('a', '', col_4_Element);
							_a.href=__url+"/Product"+"?"+"id="+products[((i+(4*j))-1)+(_page_max*(_page-1))].id;

							var _div_parent = CreateElement('div', '', _a);
							// _div_parent.style="margin-top: -43px;";

							// CreateElement('div', 'en-stock', _div_parent).innerText='En stock';
							// CreateElement('div', 'en-stock promo', _div_parent).innerText='-20%';

							// col_4_Element.id=product_ids[((i+(4*j))-1)+(_page_max*(_page-1))];
								const _product = products[((i+(4*j))-1)+(_page_max*(_page-1))];
								col_4_Element.id=_product.id;
							// CreateElement('img', '', col_4_Element).src = '../images/product-'+(i+(4*j))+'.jpg';
								CreateElement('img', '', _div_parent).src = _product.img_src;
							// CreateElement('h4', '', col_4_Element).innerHTML = "Red Printed T-Shirt";

								// CreateElement('h4', 'product-text', _a).innerHTML = _product.name;

									// CreateElement('h4', 'product-text', _a).innerHTML = _product.name.includes("produit")?"":_product.name;

									// var heitchFour = CreateElement('h4', 'product-text', _a);
									// heitchFour.innerHTML = _product.name;
									// heitchFour.style.color = _product.name.includes("produit")?"white":"#555";


									var heitchFour = _product.name.includes("produit")?null:CreateElement('h4', 'product-text', _a);
									if(heitchFour!=null)
										heitchFour.innerHTML = _product.name;

							// var ratingElement = CreateElement('div', 'rating', col_4_Element);
							// 	for(var k=0; k<5; k++) { CreateElement('span', 'fa fa-star checked', ratingElement); }

							// CreateElement('p', '', col_4_Element).innerHTML = "$100";
								// CreateElement('p', '', _a).innerHTML = _product.price+" DH";
					}
			}

			var page_btn = CreateElement('div', 'page-btn', small_container_Element);
				prev_page_btn = CreateElement('span', '', page_btn);
				prev_page_btn.innerHTML = '&#8592;';
				for(var i=1; i<(products.length/_page_max)+1; i++)
					CreateElement('span', 'page-num', page_btn).innerHTML = i;
				next_page_btn = CreateElement('span', '', page_btn);
				next_page_btn.innerHTML = '&#8594;';

			// ------------------ js for products ---------------------

			var _products = document.getElementsByClassName("products-page-col-4");

			for (let product of _products)
			{
				product.onclick = function()
				{
					const url = location.protocol + '//' + location.host;
					window.location.href=url+"/Product"+"?"+"id="+product.id;
				}
			}

			var _page_nums = document.getElementsByClassName("page-num");

			for (let _page_num of _page_nums)
			{
				_page_num.onclick = function()
				{
					_page=_page_num.innerText;
					UpdatePage(2);
				}
			}

			prev_page_btn.onclick = function()
			{
				if(_page>1)
				{
					_page--;
					UpdatePage(2);
				}
			}

			next_page_btn.onclick = function()
			{
				console.log(_page);
				console.log(document.getElementsByClassName("page-num").length/2);
				if(_page<document.getElementsByClassName("page-num").length/2)
				{
					_page++;
					UpdatePage(2);
				}
			}
		}

		function removeProducts()
		{
			var small_container_Element = document.getElementsByClassName('small-container')[0];
			const _len = small_container_Element.children.length-1;
			for(var i=0; i<_len; i++)
				small_container_Element.removeChild(small_container_Element.children[1]);
		}

		function sortProducts(bool)
		{
			var prices = [];

			if(bool==0||bool==1) {
					products.forEach(product => 
					prices.push(parseFloat(product.price.replace(',', '.')))
				);
			}
			else if(bool==2||bool==3) {
					products.forEach(product => 
					prices.push(product.name.charAt(0).toUpperCase() + product.name.slice(1).toLowerCase())
				);
			}

			// console.log(prices);

			var result=[];

			if(bool==0||bool==2)
				result = Array.from(Array(prices.length).keys()).sort((a, b) => prices[a] < prices[b] ? -1 : (prices[b] < prices[a]) | 0);
			else if(bool==1||bool==3)
				result = Array.from(Array(prices.length).keys()).sort((a, b) => prices[a] > prices[b] ? -1 : (prices[b] > prices[a]) | 0);

			console.log(result);

			var small_container_Element = document.getElementsByClassName('small-container')[0];

			var page_btn = CreateElement('div', 'page-btn', small_container_Element);
				let prev_page_btn = CreateElement('span', '', page_btn);
				prev_page_btn.innerHTML = '&#8592;';
				for(var i=1; i<(products.length/_page_max)+1; i++)
					CreateElement('span', 'page-num', page_btn).innerHTML = i;
				let next_page_btn = CreateElement('span', '', page_btn);
				next_page_btn.innerHTML = '&#8594;';

			for(var j=0; j<_page_max/4;j++)
			{
				var row_Element = CreateElement('div', 'products-page-row', small_container_Element);
					for(var i=1; i<5; i++)
					{
						// console.log(((i+(4*j))-1)+(_page_max*(_page-1)));

						if( (((i+(4*j))-1)+(_page_max*(_page-1)))>products.length-1 )
							break;

						var col_4_Element = CreateElement('div', 'products-page-col-4', row_Element);

							const __url = location.protocol + '//' + location.host;
							var _a = CreateElement('a', '', col_4_Element);
							_a.href=__url+"/Product"+"?"+"id="+products[result[((i+(4*j))-1)+(_page_max*(_page-1))]].id;

							var _div_parent = CreateElement('div', '', _a);
							// _div_parent.style="margin-top: -43px;";

							// CreateElement('div', 'en-stock', _div_parent).innerText='En stock';
							// CreateElement('div', 'en-stock promo', _div_parent).innerText='-20%';

							const _product = products[result[((i+(4*j))-1)+(_page_max*(_page-1))]];
							col_4_Element.id=_product.id;
							CreateElement('img', '', _div_parent).src = _product.img_src;
							

							//
							// 
							var heitchFour = _product.name.includes("produit")?null:CreateElement('h4', 'product-text', _a);
									if(heitchFour!=null)
										heitchFour.innerHTML = _product.name;
							//
							//

							// var ratingElement = CreateElement('div', 'rating', col_4_Element);
							// 	for(var k=0; k<5; k++) { CreateElement('span', 'fa fa-star checked', ratingElement); }

							// CreateElement('p', '', col_4_Element).innerHTML = _product.price+" DH";
					}
			}

			var page_btn = CreateElement('div', 'page-btn', small_container_Element);
				prev_page_btn = CreateElement('span', '', page_btn);
				prev_page_btn.innerHTML = '&#8592;';
				for(var i=1; i<(products.length/_page_max)+1; i++)
					CreateElement('span', 'page-num', page_btn).innerHTML = i;
				next_page_btn = CreateElement('span', '', page_btn);
				next_page_btn.innerHTML = '&#8594;';


			// next_page_btn.onclick = function()
			// {
			// 	if(_page<document.getElementsByClassName("page-num").length/2)
			// 	{
			// 		_page++;
			// 		UpdatePage();
			// 	}
			// }

			var _products = document.getElementsByClassName("products-page-col-4");

			for (let product of _products)
			{
				product.onclick = function()
				{
					const url = location.protocol + '//' + location.host;
					window.location.href=url+"/Product"+"?"+"id="+product.id;
				}
			}

			var _page_nums = document.getElementsByClassName("page-num");

			for (let _page_num of _page_nums)
			{
				_page_num.onclick = function()
				{
					_page=_page_num.innerText;
					UpdatePage(2);
				}
			}

			prev_page_btn.onclick = function()
			{
				if(_page>1)
				{
					_page--;
					UpdatePage(2);
				}
			}

			next_page_btn.onclick = function()
			{
				if(_page<document.getElementsByClassName("page-num").length/2)
				{
					_page++;
					UpdatePage(2);
				}
			}
		}

		const _select = document.getElementById("products-select");

		function sort(bool, indicator=0) {
			urlParams = new URLSearchParams(window.location.search);
			// bool==1 while in the webpage, bool==2 when refreshing. else the webpage thing would never change
			if((_select.value=="Tri par défaut"&&bool==1)||(urlParams.get("sorting")=="default"&&bool==2)){
				removeProducts();
				addProducts();
				const url = location.protocol + '//' + location.host + location.pathname + "?sorting=default";
       			// window.history.pushState('', '', url);
       			_new_url="";
       			_new_url+=url;
				_select.value="Tri par défaut";
			}
			else if((_select.value=="Le moins cher"&&bool==1)||(urlParams.get("sorting")=="lowToHight"&&bool==2)){
				removeProducts();
				sortProducts(0);
				const url = location.protocol + '//' + location.host + location.pathname + "?sorting=lowToHight";
       			// window.history.pushState('', '', url);
       			_new_url="";
       			_new_url+=url;
				_select.value="Le moins cher";
			}
			else if((_select.value=="Le plus cher"&&bool==1)||(urlParams.get("sorting")=="highToLow"&&bool==2)){
				removeProducts();
				sortProducts(1);
				const url = location.protocol + '//' + location.host + location.pathname + "?sorting=highToLow";
       			// window.history.pushState('', '', url);
       			_new_url="";
       			_new_url+=url;
				_select.value="Le plus cher";
			}
			else if((_select.value=="Nom de A à Z"&&bool==1)||(urlParams.get("sorting")=="alphabetical"&&bool==2)){
				removeProducts();
				sortProducts(2);
				const url = location.protocol + '//' + location.host + location.pathname + "?sorting=alphabetical";
       			// window.history.pushState('', '', url);
       			_new_url="";
       			_new_url+=url;
				_select.value="Nom de A à Z";
			}
			else if((_select.value=="Nom de Z à A"&&bool==1)||(urlParams.get("sorting")=="reverseAlphabetical"&&bool==2)){
				removeProducts();
				sortProducts(3);
				const url = location.protocol + '//' + location.host + location.pathname + "?sorting=reverseAlphabetical";
       			// window.history.pushState('', '', url);
       			_new_url="";
       			_new_url+=url;
				_select.value="Nom de Z à A";
			}

			if(urlParams.get("page")!=null&&indicator==1){
				_page=urlParams.get("page");
			}
		}

		sort(2, 1);
		UpdatePage();

		_select.onclick = function()
		{
			sort(1);
			UpdatePage();
		}

		_select.onchange = function()
		{
			sort(1);
			UpdatePage();
		}

		window.onhashchange = function() {
			sort(1, 1);
		    UpdatePage(1);
		}

		window.onpopstate = function() {
			sort(1, 1);
		    UpdatePage(1);
		}

		// https://www.w3schools.com/js/js_cookies.asp

		// function setCookie(cname, cvalue, exdays) {
		//   const d = new Date();
		//   d.setTime(d.getTime() + (exdays*24*60*60*1000));
		//   let expires = "expires="+ d.toUTCString();
		//   document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
		// } setCookie("yolo", "hey", 1*30);


		var MenuItems = document.getElementById("MenuItems");
		MenuItems.style.maxHeight = "0px";

		function menutoggle()
		{
			if(MenuItems.style.maxHeight == "0px")
			{
				MenuItems.style.maxHeight = "100vh";
				// document.getElementById("Title").style.opacity = "0";
				// document.getElementsByClassName("explorebtn")[0].style.opacity = "0";
				document.getElementsByClassName("text-logo")[0].style.opacity = "0";
				// document.getElementById("social-links").style.opacity = "0";

				document.getElementById("top-menu-icon-bar").style.transform = "rotate(45deg) translate(25%, 125%)";
				document.getElementById("mid-menu-icon-bar").style.transition = "0s";
				document.getElementById("mid-menu-icon-bar").style.transform = "rotate(0deg)";
				document.getElementById("mid-menu-icon-bar").style.width = "0";
				// document.getElementById("mid-menu-icon-bar").style.opacity = "0";
				document.getElementById("bot-menu-icon-bar").style.transform = "rotate(-45deg) translate(25%, -125%)";
				
				document.getElementById("top-menu-icon-bar").style.backgroundColor = "white";
				document.getElementById("mid-menu-icon-bar").style.backgroundColor = "white";
				document.getElementById("bot-menu-icon-bar").style.backgroundColor = "white";

				document.getElementsByClassName("products-page-row row-2")[0].style.opacity = "0";
			}
			else
			{
				MenuItems.style.maxHeight = "0px";
				// document.getElementById("Title").style.opacity = "1";
				// document.getElementsByClassName("explorebtn")[0].style.opacity = "1";
				document.getElementsByClassName("text-logo")[0].style.opacity = "1";
				// document.getElementById("social-links").style.opacity = "1";

				document.getElementById("top-menu-icon-bar").style.transform = "rotate(0deg)";
				document.getElementById("mid-menu-icon-bar").style.transition = "0.5s";
				document.getElementById("mid-menu-icon-bar").style.transform = "rotate(0deg)";
				document.getElementById("mid-menu-icon-bar").style.width = "35px";
				// document.getElementById("mid-menu-icon-bar").style.opacity = "1";
				document.getElementById("bot-menu-icon-bar").style.transform = "rotate(0deg)";

				document.getElementById("top-menu-icon-bar").style.backgroundColor = "black";
				document.getElementById("mid-menu-icon-bar").style.backgroundColor = "black";
				document.getElementById("bot-menu-icon-bar").style.backgroundColor = "black";


				document.getElementsByClassName("products-page-row row-2")[0].style.opacity = "1";
			}
		}

	</script>

</body>
</html>